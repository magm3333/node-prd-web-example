{
  "name": "node-prd",
  "version": "0.0.1-beta6",
  "description": "A node.js module, require JRE 1.6 or later, PRD 3.9 or later and is 100% GNU GPLv3 licensed.",
  "main": "index.js",
  "scripts": {
    "test": "make test"
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/magm3333/node-prd.git"
  },
  "keywords": [
    "nodejs",
    "pentaho",
    "reporintg",
    "java",
    "prd"
  ],
  "author": {
    "name": "Mariano García Mattío"
  },
  "license": "GNU GPLv3",
  "readmeFilename": "README.md",
  "readme": " [![eGluBI.com.ar](http://troyanx.com/eglubi/eglu/img/banner_up.png)](http://eglubi.com.ar)\n\n# node-prd (by magm) - eGluBI.com.ar \n\nhttp://troyanx.com/eglubi/eglu/img/banner_up.png\n [magm's blog](http://blog.magm.com.ar)\n\n [egluBI web](http://www.eglubi.com.ar)\n\n\n- [Español](#a1)\n- [English](#a2)\n\n***********************************\n***********************************\n***********************************\n\n<a name=\"a1\"/>\n# Documentación en Español\n\n## Instalación\n\n    npm install node-prd\n\n\n## Qué es esto? \nnode-prd es un módulo node.js que permite ejecutar reportes Pentaho (PRD) desde una plicación node.js.\n\n\n## Prerequisitos\n\n- Java Development Kit (JDK) 1.6 o posterior\n- Pentaho Report Designer 3.9 o 4.0\n- Linux, Windows (no disponible aún) o MacOS (no disponible aún)\n\n\n## Cómo se utiliza?\nEs muy simple, primero se configura y luego se ejecuta el reporte.\n    //Carga del módulo\n    var nodePrd=require('node-prd');\n    var path=require('path');\n\n    // Configuración de la instancia:\n    // primer parámetro: json con información para procesar el reporte\n    // segundo parámetro: configuración de entorno \n    var nPrd=nodePrd.createInstance(\n        { //Información para procesar el reporte\n            reportBundlePath: \"/home/mariano/report.prpt\",\n            outputFilePath: path.resolve(\"./out/report\"),\n            outputType: \"pdf\",\n            params: [\n                {name : \"minId\", value : 4, type:\"Integer\"},\n                {name : \"title\", value : 'Titulo: '+ new Date(), type : \"String\"},\n                {name : \"subtitle1\", value : 'Sub titulo 1', type : \"String\"},\n                {name : \"subtitle2\", value : 'Sub titulo 2', type : \"String\"}\n            ]\n        },\n        { // Configuración de entorno\n            prdHomePath : '/home/mariano/pentaho/prd4',\n            tmpParentFolder : '.'\n        }\n    );\n\n    // Versión del módulo \n    console.log('node-prd version: '+nPrd.getVersion());\n    console.log('Running report...');\n\n    nPrd.runReport(function(code){\n        if(code==0)\n            console.log(\"Report OK\");\n        else\n            console.log(\"Report ERROR=\"+code);\n    },false,true);\n\n<a name=\"configurarReporte\"/>\n### Información para procesar el reporte\n\n- reportBundlePath (obligatorio): es la localización del paquete que contiene el reporte PRD.\n  Ejemplo: reportBundlePath: '/home/magm/report.prpt'\n \n- outputFilePath (obligatorio): es la localización del archivo de salida, con o sin extensión (ver también: outputType)\n  Ejemplo: outputFilePath:'/home/magm/report.pdf'\n\n\n- outputType (obligatorio): es el formato de lsalida. Los valores posibles son: pdf, excel, excelXlsx, rtf o html.\n  En caso de formato de salida html, se requiere un valor para: htmlFolder\n  Ejemplo: outputType: 'pdf'\n\n\n- htmlFolder (obligatorio en caso de que outputType=html): es el nombre que se utilizará para crear una carpeta a partir de la carpeta padre establecida en outputFilePath.\n  En esta carpeta se colocan los archivos que componen la salida HTML. La página principal tendrá en nombre especificado en : outputFilePath  \n  Se recomienda que esta carpeta pueda se servida desde la aplicación web.\n\n\n- params (opcional): arreglo de objetos que representan los parámetros del reporte.\n  Cada objeto contiene los siguientes atributos:\n  - name: el nombre del parámetro definido en el reporte. Atención: el nombre es sensitivo a minúsculas/mayúsculas\n  - value: el valor del parámetro\n  - type: el tipo de datos del parámetro. Los valores posibles son: Integer, Long, Double, Float, Date y String por ahora.\n    Los valores numéricos no van entrecomillados y el separador decimal debe ser un punto y no una coma, los valores Date deben tener formto  unix timestamp\n\n### La configuración para procesar el reporte:\n- puede cambiarse llamando al método setConfig(otherConfig) \n- u obtenerse con el método getConfig()\n\n### Configuración de entorno\n- prdHomePath (opcional): es path al home (carpeta en la cual está instalado) de Pentaho Report Designer. Si no se especifica, el módulo intentará obtener el valor de la variable de entorno llamada PRD_HOME. Una de las dos (el parámetro o la variable de entorno) se debe establecer. \n- tmpParentFolder (opcional): carpeta que contendrá la carpeta tmp. Si no se especifica, se utiliza el directorio actual (process.cwd()).\n\n### Método runReport(cb, logOut, logErr)\nRecibe tres parámetros:\n- cb: función de retrollamada que será ejecutada cuando finalice la ejecución del reporte. Recibe como parámetro un número entero (code) que contiene el ERROR_LEVEL, si es igual 0 el reporte se ha generado, caso contrario hubo un error.\n- logOut: valor booleano que indica si queremos ver la salida estándar.\n- logErr: valor booleano que indica si queremos ver la salida de error.\n\n### Reporte como Servicio (RaaS)\nPara soportar alta concurrencia, node-prd implementa RaaS. Consta de 3 pasos:\n\n1) Iniciar el servidor.\n\n        nPrd.initRaaS(port, logOut, logErr);\n\n- port: puerto del servidor RaaS\n- logOut: valor booleano que indica si queremos ver la salida estándar.\n- logErr: valor booleano que indica si queremos ver la salida de error.\n\n2) [Configurar](#configurarReporte) y ejecutar reporte.\n\n        nPrd.runRaaS(cb);\n\n- cb: función de retrollamada que será ejecutada cuando finalice la ejecución del reporte. Recibe como parámetro un objeto JSON que contiene el código y el mensaje con información acerca del resultado de la ejecución. Formato: {code: nnnn, msg:'xxxxx'}, code=0 msg='OK'\n\n3) Detener el servidor cuando no se requiera.\n\n        nPrd.stopRaaS();\n\n### Cambio de fuente de datos\nPor defecto, cuando se ejecuta un reporte se utiliza la fuente de datos embebida en el reporte.\n\nPara implementar una fuente de datos alternativa, en primer lugar, se debe agregar el atributo dataFactory.\n\ndataFactory: es el atributo que define una fuente de datos alternativa.\n\nSi se desea cambiar la fuente de datos, primero hay que seleccionar la correcta. \nLas opciones son: NamedStatic, Sql, XPath, Kettle y BandedMDX.\n\nara seleccionar el typo de fuente de datos, se debe insertar el atributo type dentro de dataFactory\n\ntype: el tipo de fuente de datos a implementar. Los valores posibles son: NamedStatic, Sql, XPath, Kettle y BandedMDX.\n\n\n#### NamedStatic: los datos se envían desde la aplicación node en formato json.\n\n  Ejemplo de configuración:\n\n      \"dataFactory\" : {\n          \"type\" : \"NamedStatic\",\n          \"columnNames\" : [\"idZona\",\"Zona\"],\n          \"columnTypes\" : [\"Integer\",\"String\"],\n          \"data\" : [\n              [1,\"este\"],\n              [2,\"oeste\"],\n              [3,\"norte\"],\n              [4,\"sur\"]\n           ]\n      }\n\n- columnNames: arreglo que contiene los nombres de las columnas. Hay que tener en cuenta que los nombres se definen exactamente como están definidos en el reporte. El número de columnas definido aquí, define el número de columnas en los datos.\n- columnTypes: contiene los tipos de datos para cada una d elas columnas definidas en columnNames.\n- data: arreglo bi-dimensional conteniendo los datos.\n\n#### Sql: permite definir los datos de la conexión JDBC y la consulta SQL.\n\n  Ejemplo de configuración:\n\n      \"dataFactory\" : {\n          \"type\" : \"Sql\",\n          \"jdbcConfig\" : {\n              \"driver\" : \"com.mysql.jdbc.Driver\",\n              \"url\" : \"jdbc:mysql://localhost:3306/practico\",\n              \"user\" : \"root\",\n              \"password\" : \"root\"   \n          },\n          \"query\" : \"SELECT idZona, Zona FROM Zonas WHERE idZona<=${minId}\"\n      }\n\n- jdbcConfig: es un objeto json que contiene los 4 atributos necesarios para establecer una conexión JDBC\n- query: consulta SQL que puede contener parámetros en la forma ${paramName}.\n\n### Requieres más controladores JDBC?\nSi requieres un nuevo controlador JDBC para una fuente de datos, solo hayq que descargar el driver JDBC y colocarlo en la carpeta [PRD_HOME]/lib/jdbc.\n\n\n## TODO\n- Implementar: SQLReportDataFactory, XPathDataFactory, KettleDataFactory y BandedMDXDataFactory\n- Crear un sitio web de ejemplo con express/jade\n- Hacer que funcione en Windows & Mac\n- Agregar más tipos de parámetros (StringList, etc)\n- Auto test\n- Alguna idea o propuesta?\n\n## Licencia\n\nCopyleft 2012 Mariano García Mattío\n\nnode-prd es 100% GNU GPLv3 \n\n*******************************\n*******************************\n*******************************\n\n<a name=\"a2\"/>\n\n# English documentation\n\n## Install\n\n    npm install node-prd\n\n\n## What is This? \nnode-prd is a node.js module that allows to execute Pentaho Reports (PRD) from node.js application.\n\n\n## Prerequisites\n\n- Java Development Kit (JDK) 1.6 or later\n- Pentaho Report Designer 3.9 or 4.0\n- Linux, Windows (not yet available) or MacOS (not yet available)\n\n\n## How to use\nIt is very simple, in first place set the configuration and later run the report.\n    //Load module\n    var nodePrd=require('node-prd');\n    var path=require('path');\n\n    // Configure module intance:\n    // first parameter: json with information to process report\n    // second parameter: configuration environment \n    var nPrd=nodePrd.createInstance(\n        { //Information to process report\n            reportBundlePath: \"/home/mariano/report.prpt\",\n            outputFilePath: path.resolve(\"./out/report\"),\n            outputType: \"pdf\",\n            params: [\n                {name : \"minId\", value : 4, type:\"Integer\"},\n                {name : \"title\", value : 'Title: '+ new Date(), type : \"String\"},\n                {name : \"subtitle1\", value : 'Sub title 1', type : \"String\"},\n                {name : \"subtitle2\", value : 'Sub title 2', type : \"String\"}\n            ]\n        },\n        { // Configuration environment\n            prdHomePath : '/home/mariano/pentaho/prd4',\n            tmpParentFolder : '.'\n        }\n    );\n\n    // Show module version \n    console.log('node-prd version: '+nPrd.getVersion());\n    console.log('Running report...');\n    nPrd.runReport(function(code){\n        if(code==0)\n            console.log(\"Report OK\");\n        else\n            console.log(\"Report ERROR=\"+code);\n    },false,true);\n<a name=\"configureReport\"/>\n### Information to process report\n\n- reportBundlePath (mandatory): is the location of PRD defintion bundle.\n  Example: reportBundlePath: '/home/magm/report.prpt'\n \n- outputFilePath (mandatory): is the location of output file, with or without extension (see also: outputType)\n  Example: outputFilePath:'/home/magm/report.pdf'\n\n\n- outputType (mandatory): is the output render type. The possible values ​​are: pdf, excel, excelXlsx, rtf or html.\n  In case of html output, need to set the value for: htmlFolder\n  Example: outputType: 'pdf'\n\n\n- htmlFolder (mandatory in case outputType=html): is the name that will be used to create a folder from the parent folder set in outputFilePath.\n  In this folder will place all the files that compose the HTML output. The home page will have the name specified in: outputFilePath  \n  Is recommended that a folder can then serve from the web application\n\n\n- params (optional): array of objects that represent report parameters.\n  Each object contains the following attributes:\n  - name: te name of prd report parameter. Attention: the name is case sensitive\n  - value: the value of parameter\n  - type: the data type of parameter. Possible values are: Integer, Long, Double, Float, Date and String for now.\n    Numeric values are not quoted and decimal separator must be a point, not an comma, Date value must be unix      timestamp format\n\n### The configuration to process report:\n- Can be changed by calling setConfig(otherConfig)\n- Or obtained with the method getConfig()\n\n### Configuration environment \n- prdHomePath (optional): is the path to Pentaho Report Designer Home. If not specified, module try to use the environment variable named PRD_HOME. One of two (the parameter or the environment variable) must be set \n- tmpParentFolder (optional): folder containing the tmp folder. If not set, current directory (process.cwd()) is used.\n\n### Method runReport (cb, logOut, logErr)\nIt takes three parameters:\n- cb: callback function that will be executed when ends execution of the report. Receives as a parameter an integer (code) that contains the ERROR_LEVEL, if equals 0 the report has been generated, otherwise an error code.\n- logOut: boolean value indicating if seen the standard output.\n- logErr: boolean value indicating if seen the error output\n\n### Report as a Service (RaaS)\nTo support high concurrency, node-prd implements RAAS. Consists of three steps:\n\n1) Start the server.\n\n        nPrd.initRaaS(port, logout, logErr);\n\n- port: port number for RaaS Server\n- logOut: boolean value indicating if seen the standard output.\n- logErr: boolean value indicating if seen the error output\n\n2) [Configure] (#configureReport) and run report.\n\n        nPrd.runRaaS(cb);\n\n- cb: callback function that will be executed when ends execution of the report. Receives as a parameter an JSON object that contains the code and message with information about execution result. Format: {code: nnnn, msg:'xxxxx'}, code=0 msg='OK'\n\n3) Stop the server when not required.\n\n       nPrd.stopRaaS();\n\n### Change data sources\nBy default, when you run a report is used as the data source the embeded data source.\n\nTo implement an alternative data source, in the first place, must be added the attribute dataFactory.\n\ndataFactory: is the attribute that defines an alternative data source.\n\nIf you want change data source, first must be select the correct. \nThe options are: NamedStatic, Sql, XPath, Kettle and BandedMDX.\n\nTo select the type of data source, we must insert the type attribute within dataFactory\n\ntype: the type of data source to implement. Possible values are: NamedStatic, Sql, XPath, Kettle and BandedMDX.\n\n\n#### NamedStatic: data are sent from the node application in json format.\n\n  Example of configuration:\n\n      \"dataFactory\" : {\n          \"type\" : \"NamedStatic\",\n          \"columnNames\" : [\"idZona\",\"Zona\"],\n          \"columnTypes\" : [\"Integer\",\"String\"],\n          \"data\" : [\n              [1,\"east\"],\n              [2,\"west\"],\n              [3,\"north\"],\n              [4,\"south\"]\n           ]\n      }\n\n- columnNames: Array that contains the names of the columns. Please note that the names are defined exactly as defined in the report. The number of defined columns here, define the number of columns in the data.\n- columnTypes: contains data type for each of columns defined in columnNames.\n- data: a two-dimensional array containing data.\n\n#### Sql: permite definir los datos de la conexión JDBC y la consulta SQL.\n\n  Ejemplo de configuración:\n\n      \"dataFactory\" : {\n          \"type\" : \"Sql\",\n          \"jdbcConfig\" : {\n              \"driver\" : \"com.mysql.jdbc.Driver\",\n              \"url\" : \"jdbc:mysql://localhost:3306/practico\",\n              \"user\" : \"root\",\n              \"password\" : \"root\"   \n          },\n          \"query\" : \"SELECT idZona, Zona FROM Zonas WHERE idZona<=${minId}\"\n      }\n\n- jdbcConfig: es un objeto json que contiene los 4 atributos necesarios para establecer una conexión JDBC.\n- query: consulta SQL que puede contener parámetros en la forma ${paramName}.\n\n### Need more JDBC Drivers?\nIf you need a new JDBC driver for one data source, simply download JDBC driver and put it in the folder [PRD_HOME]/lib/jdbc.\n\n\n## TODO\n- Implement: SQLReportDataFactory, XPathDataFactory, KettleDataFactory and BandedMDXDataFactory\n- Build an example web site with express/jade\n- Make it work on Windows & Mac\n- Add more parameter types (StringList, etc)\n- Auto test\n- Do you have any idea?\n\n## License\n\nCopyleft 2012 Mariano García Mattío\n\nnode-prd is 100% licensed GNU GPLv3 ",
  "_id": "node-prd@0.0.1-beta6",
  "_from": "node-prd@*"
}
